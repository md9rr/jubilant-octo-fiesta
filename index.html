<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Список участников</title>
<style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f4f7f9;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
}
header {
    background: #4a90e2;
    color: white;
    width: 100%;
    padding: 20px 0;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
main {
    flex: 1;
    width: 90%;
    max-width: 800px;
    margin: 20px auto;
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}
h1 { text-align: center; color: #333; margin-bottom: 20px; }
textarea {
    width: 100%;
    height: 150px;
    padding: 10px;
    font-size: 16px;
    border-radius: 8px;
    border: 1px solid #ccc;
    resize: vertical;
}
button {
    display: block;
    margin: 15px auto;
    padding: 10px 25px;
    font-size: 16px;
    background: #4a90e2;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
}
button:hover { background: #357ab8; }
ul { list-style-type: none; padding: 0; }
li {
    background: #f0f4f8;
    margin: 5px 0;
    padding: 12px 15px;
    border-radius: 8px;
    font-size: 16px;
    color: #333;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    transition: 0.2s;
}
li:hover { background: #e1e8f0; }
</style>
</head>
<body>

<header>
<h1>Список участников</h1>
</header>

<main>
<textarea id="data" placeholder="Вставьте текст с участниками здесь..."></textarea>
<button onclick="countParticipants()">Посчитать</button>
<ul id="result"></ul>
</main>

<script>
function countParticipants() {
    const text = document.getElementById('data').value;
    const regex = /([\wА-Яа-яЁё\s'-]+)\s*\((\d+)\)/g;
    const counter = {};
    let match;

    while ((match = regex.exec(text)) !== null) {
        let name = match[1].trim();
        name = name.replace(/^,|,$/g, ''); // убираем лишние запятые
        const id = match[2];

        if (!counter[id]) {
            counter[id] = { name: name, id: id, count: 0 };
        }
        counter[id].count += 1;
    }

    const ul = document.getElementById('result');
    ul.innerHTML = '';

    Object.values(counter)
          .sort((a,b) => b.count - a.count)
          .forEach(player => {
              const li = document.createElement('li');
              li.textContent = `${player.name} (ID: ${player.id}) — ${player.count} раз(а)`;
              ul.appendChild(li);
          });
}
</script>

</body>
</html>
